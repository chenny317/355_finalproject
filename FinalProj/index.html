<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Visualization with Vega-Lite</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Navigation -->
<nav>
  <a href="#chart1">Canada</a>
  <a href="#chart2">United States</a>
  <a href="#chart3">China</a>
  <a href="#chart4">Netherlands</a>
  <a href="#chart5">Combined</a>
</nav>




<section>
  
  <div class="scroll-grid">
    <!-- the left section (1)-->
    <div class="scroll-order">
      <section class="section box1">
        <div class="content-box">
          <h1>Overdose trends and Regulations 1980-2021</h1>
        </div> 
      </section> 
    </div>


      <!-- the right section (1)-->
    <div>
      <section class="graph-section">
          <p>Intro to the issue, mention the diff countries briefly and what to expect from this visualization...”you will be asked to draw how you think the curve would look based on these countries approach...”</p>
      </section>
    </div>

  </div>
  <div  id="chart1" class="scroll-grid">
    <!-- the left section (2)-->
    <div class="scroll-order">
      <section class="section box1">
            <div class="content-box">
                    <h2>Canada Overdose Chart</h2>
            </div>
      </section> 
    </div>


      <!-- the right section (2)-->
    <div>
      <section class="graph-section">
        
        <div id="chart-container">
          <div class="instruction">Draw the line for the missing years on this chart.</div>
          
          <button id="show-results" disabled>Show me how I did.</button>
          <div id="line-chart"></div>
          <text>Need to change the x-labels, make them 5 years, add a clear button</text>
          <div></div>
        </div>

        <script src="vis1.js"></script>

          <div id="vis1"></div>
          <p>Canada's overdose death rates is onthe rise.</p>
      </section>
    </div>
  </div>

  <div id="chart2" class="scroll-grid">
    <!-- the left section (3)-->
    <div class="scroll-order">
      <section class="section box1">
        <div class="content-box">
              <h2>The United States Overdose Chart</h2>
        </div>   
      </section> 
    </div>


      <!-- the right section (3)-->
    <div>
      <section class="graph-section">

          <div id="vis2"></div>
          <p>The United States has experienced one of the highest overdose death rates globally.</p>
      </section>
    </div>
  </div>
  <div id="chart3" class= "scroll-grid">
    <!-- the left section (4)-->
    <div class="scroll-order">
      <section class="section box1">
        <div class="content-box">
          <h2>China Overdose Chart</h2>
        </div>     
      </section> 
    </div>


      <!-- the right section (4)-->
    <div>
      <section class="graph-section">

          <div id="vis3"></div>
          <p>China's overdose rate encountered a sharp decline in the early 2000s.</p>
      </section>
    </div>
  </div>
  <div class="scroll-grid">
    <!-- the left section (4)-->
    <div id="chart4" class="scroll-order">
      <section class="section box1">
        <div class="content-box">

              <h2>The Netherlands Overdose Chart</h2>
        </div>   
      </section> 
    </div>


      <!-- the right section (4)-->
    <div>
      <section class="graph-section">

          <div id="vis4"></div>
          <p>The Netherlands overdose rate has been relatavly the same in the past 40 years</p>
          
            
      </section>
    </div>
  </div>


  <div class="scroll-grid">
    <!-- the left section (4)-->
    <div id="chart5" class="scroll-order">
      <section class="section box1">
        <div class="content-box">

              <h2>The Combined Overdose Chart</h2>
        </div>   
      </section> 
    </div>


      <!-- the right section (4)-->
    <div>


        
        <div id="vis5">  
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script src="combinedVis.js"></script>
      </div>
      


      <section id="chart5" class="graph-section">

          <div id="vis5"></div><h2>Combined Visualization</h2>
          <div id="line-chartCom"></div>
          <p>combined</p>
          
            
      </section>
    </div>
  </div>

  
  



</section>  




<script>  
  
      const yDomain = [0, 22];
  
      const dataUrl = "Drug use disorder death rate - Sheet3.csv";
  
      const createChartSpec = (location) => ({
        $schema: "https://vega.github.io/schema/vega-lite/v5.json",
        description: `A line graph for ${location}`,
        data: { url: "Drug use disorder death rate - Sheet3.csv" },
        transform: [
          { filter: `datum.location === '${location}'` }
        ],
        mark: "line",
        encoding: {
          x: {
            field: "year",
            type: "ordinal",
            axis: {
              title: "Year",
              labelFont: "Arial",
              labelFontSize: 12,
              labelAngle: 45,
              titleFont: "Times New Roman",
              titleFontSize: 16
            }
          },
          y: {
            field: "val",
            type: "quantitative",
            scale: { domain: yDomain }, // Shared scale
            axis: {
              title: "Death Rate per 100,000",
              labelFont: "Arial",
              labelFontSize: 12,
              titleFont: "Times New Roman",
              titleFontSize: 16
            }
          }
        }
      });
  
      // Render Individual Charts
      vegaEmbed("#vis1", createChartSpec("Canada"));
      vegaEmbed("#vis2", createChartSpec("United States of America"));
      vegaEmbed("#vis3", createChartSpec("China"));
      vegaEmbed("#vis4", createChartSpec("Netherlands"));
  
  </script>



</body>
</html>
